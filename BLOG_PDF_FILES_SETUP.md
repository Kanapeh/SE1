# ุฑุงูููุง ฺฉุงูู ุงูุฒูุฏู ูุงูโูุง PDF ุจู ููุงูุงุช

## ๐ ุฎูุงุตู
ุงู ุฑุงูููุง ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ูุงุจูุช ุขูพููุฏ ู ุฏุงูููุฏ ูุงูโูุง PDF (ุฌุฒูุงุชุ ฺฉุชุงุจโูุง ู ููุงุจุน) ุฑุง ุจู ุณุณุชู ููุงูุงุช ุฎูุฏ ุงุถุงูู ฺฉูุฏ.

## ๐ ูุฑุงุญู ุฑุงูโุงูุฏุงุฒ

### ูุฑุญูู 1: ุงุฌุฑุง ุฏุณุชูุฑ SQL ฺฉุงูู (ุฑูุด ุณุฑุน โก)

**ุณุงุฏูโุชุฑู ุฑูุด**: ูุงู SQL ุฒุฑ ุฑุง ุฏุฑ Supabase SQL Editor ฺฉูพ ู ุงุฌุฑุง ฺฉูุฏ:

๐ ูุงู: `database/setup_pdf_files_complete.sql`

ุงู ฺฉ ุฏุณุชูุฑ SQL ฺฉุงูู ุงุณุช ฺฉู **ููู ฺฉุงุฑูุง ุฑุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏ**:
- โ ุงูุฒูุฏู ููุฏ `pdf_files` ุจู ุฌุฏูู
- โ ุงุฌุงุฏ ุงูุฏฺฉุณ
- โ ุงุฌุงุฏ Storage Bucket
- โ ุชูุธู RLS Policies
- โ ูุนุงู ฺฉุฑุฏู ุฏุณุชุฑุณ ุนููู

**ูุญูู ุงุฌุฑุง:**
1. ุจู **Supabase Dashboard** โ **SQL Editor** ุจุฑูุฏ
2. ูุญุชูุง ูุงู `database/setup_pdf_files_complete.sql` ุฑุง ฺฉูพ ฺฉูุฏ
3. ุฏุฑ SQL Editor ูพุณุช ฺฉูุฏ
4. ุฑู **"Run"** ฺฉูฺฉ ฺฉูุฏ
5. โ ุชูุงู! ุณุณุชู ุขูุงุฏู ุงุณุช

---

### ูุฑุญูู 2: ุฑูุด ุฏุณุช (ุงฺฏุฑ ุฑูุด ุจุงูุง ฺฉุงุฑ ูฺฉุฑุฏ)

ุงฺฏุฑ ุฑูุด ุจุงูุง ฺฉุงุฑ ูฺฉุฑุฏุ ูโุชูุงูุฏ ูุฑุงุญู ุฑุง ุจู ุตูุฑุช ุฏุณุช ุงูุฌุงู ุฏูุฏ:

#### 2.1: ุจูโุฑูุฒุฑุณุงู ุฏุชุงุจุณ

```sql
-- ุงูุฒูุฏู ููุฏ pdf_files ุจู ุฌุฏูู blog_posts
ALTER TABLE blog_posts 
ADD COLUMN IF NOT EXISTS pdf_files JSONB DEFAULT '[]'::jsonb;

-- ุงูุฒูุฏู ุงูุฏฺฉุณ ุจุฑุง ุนููฺฉุฑุฏ ุจูุชุฑ
CREATE INDEX IF NOT EXISTS idx_blog_posts_pdf_files ON blog_posts USING GIN (pdf_files);
```

#### 2.2: ุงุฌุงุฏ Storage Bucket ุฏุฑ Supabase

1. ุจู **Supabase Dashboard** ุจุฑูุฏ
2. ุจู ุจุฎุด **Storage** ุจุฑูุฏ (ุฏุฑ ููู ุณูุช ฺูพ)
3. ุฑู **"New bucket"** ฺฉูฺฉ ฺฉูุฏ
4. ุชูุธูุงุช ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   - **Name**: `blog-pdfs`
   - **Public bucket**: โ (ุจุงุฏ ุชฺฉ ุจุฒูุฏ ุชุง ูุงูโูุง ูุงุจู ุฏุงูููุฏ ุจุงุดูุฏ)
   - **File size limit**: `52428800` (50 ูฺฏุงุจุงุช)
   - **Allowed MIME types**: `application/pdf`
5. ุฑู **"Create bucket"** ฺฉูฺฉ ฺฉูุฏ

#### 2.3: ุชูุธู RLS Policies ุจุฑุง Storage

ุจุฑุง ุงุทููุงู ุงุฒ ุฏุณุชุฑุณ ุนููู ุจู ูุงูโูุง PDFุ ุงู policy ุฑุง ุงุถุงูู ฺฉูุฏ:

1. ุฏุฑ Supabase Dashboardุ ุจู **Storage** โ **Policies** ุจุฑูุฏ
2. bucket `blog-pdfs` ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. ุฑู **"New Policy"** ฺฉูฺฉ ฺฉูุฏ
4. Policy ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:

**Policy Name**: `Allow public read access to PDFs`

```sql
-- Policy ุจุฑุง ุฎูุงูุฏู ูุงูโูุง PDF (ุฏุณุชุฑุณ ุนููู)
CREATE POLICY "Allow public read access to PDFs"
ON storage.objects
FOR SELECT
USING (bucket_id = 'blog-pdfs');
```

**Policy Name**: `Allow authenticated users to upload PDFs`

```sql
-- Policy ุจุฑุง ุขูพููุฏ ูุงูโูุง PDF (ููุท ฺฉุงุฑุจุฑุงู ูุงฺฏู ุดุฏู)
CREATE POLICY "Allow authenticated users to upload PDFs"
ON storage.objects
FOR INSERT
WITH CHECK (bucket_id = 'blog-pdfs' AND auth.role() = 'authenticated');
```

---

### ูุฑุญูู 3: ุชุณุช ุณุณุชู

1. ุจู ูพูู ูุฏุฑุช ุจุฑูุฏ: `/admin/blog`
2. ฺฉ ููุงูู ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ ุง ููุงูู ููุฌูุฏ ุฑุง ูุฑุงุด ฺฉูุฏ
3. ุฏุฑ ุจุฎุด **"ูุงูโูุง PDF (ุฌุฒูุงุช ู ููุงุจุน)"**ุ ฺฉ ูุงู PDF ุขูพููุฏ ฺฉูุฏ
4. ููุงูู ุฑุง ุฐุฎุฑู ฺฉูุฏ
5. ุจู ุตูุญู ููุงูู ุจุฑูุฏ ู ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฏฺฉูู ุฏุงูููุฏ ููุงุด ุฏุงุฏู ูโุดูุฏ

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ุงุฏูู (ุขูพููุฏ PDF):

1. ุจู `/admin/blog` ุจุฑูุฏ
2. ุฑู **"ุงูุฒูุฏู ููุงูู ุฌุฏุฏ"** ฺฉูฺฉ ฺฉูุฏ ุง ููุงูู ููุฌูุฏ ุฑุง ูุฑุงุด ฺฉูุฏ
3. ุจู ุจุฎุด **"ูุงูโูุง PDF (ุฌุฒูุงุช ู ููุงุจุน)"** ุจุฑุณุฏ
4. ุฑู **"ุงูุชุฎุงุจ ูุงู"** ฺฉูฺฉ ฺฉูุฏ ู ูุงู PDF ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
5. ูุงู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุขูพููุฏ ูโุดูุฏ ู ุฏุฑ ูุณุช ููุงุด ุฏุงุฏู ูโุดูุฏ
6. ูโุชูุงูุฏ ฺูุฏู ูุงู PDF ุงุถุงูู ฺฉูุฏ
7. ุจุฑุง ุญุฐู ฺฉ ูุงูุ ุฑู ุขฺฉูู โ ฺฉูุงุฑ ุขู ฺฉูฺฉ ฺฉูุฏ
8. ููุงูู ุฑุง ุฐุฎุฑู ฺฉูุฏ

### ุจุฑุง ฺฉุงุฑุจุฑุงู (ุฏุงูููุฏ PDF):

1. ุจู ุตูุญู ููุงูู ุจุฑูุฏ
2. ุฏุฑ ุจุฎุด **"ูุงูโูุง ูุงุจู ุฏุงูููุฏ"**ุ ูุงูโูุง PDF ูุฑุชุจุท ููุงุด ุฏุงุฏู ูโุดููุฏ
3. ุฑู ูุฑ ูุงู ฺฉูฺฉ ฺฉูุฏ ุชุง ุฏุงูููุฏ ุดูุฏ

## โ๏ธ ูุญุฏูุฏุชโูุง

- **ุญุฏุงฺฉุซุฑ ุญุฌู ูุงู**: 50 ูฺฏุงุจุงุช
- **ูุฑูุช ูุฌุงุฒ**: ููุท PDF (`.pdf`)
- **ุชุนุฏุงุฏ ูุงูโูุง**: ูุงูุญุฏูุฏ (ุงูุง ุชูุตู ูโุดูุฏ ุจุด ุงุฒ 10 ูุงู ูุจุงุดุฏ)

## ๐ง ุชูุธูุงุช ูพุดุฑูุชู

### ุชุบุฑ ุญุฏุงฺฉุซุฑ ุญุฌู ูุงู

ุฏุฑ ูุงู `app/admin/blog/page.tsx`ุ ุฎุท ุฒุฑ ุฑุง ูพุฏุง ฺฉูุฏ:

```typescript
const maxSize = 50 * 1024 * 1024; // 50MB
```

ุญุฌู ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุชูุธู ฺฉูุฏ (ุจู ุจุงุช).

### ุชุบุฑ ูุงู Bucket

ุงฺฏุฑ ูโุฎูุงูุฏ ูุงู bucket ุฑุง ุชุบุฑ ุฏูุฏ:

1. ุฏุฑ Supabaseุ bucket ุฌุฏุฏ ุจุง ูุงู ููุฑุฏ ูุธุฑ ุงุฌุงุฏ ฺฉูุฏ
2. ุฏุฑ ูุงู `app/admin/blog/page.tsx`ุ ุชูุงู `'blog-pdfs'` ุฑุง ุจุง ูุงู ุฌุฏุฏ ุฌุงฺฏุฒู ฺฉูุฏ

## ๐ ุฑูุน ูุดฺฉูุงุช

### ูุดฺฉู: ูุงู ุขูพููุฏ ููโุดูุฏ

**ุฑุงูโุญู:**
1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู bucket `blog-pdfs` ุงุฌุงุฏ ุดุฏู ุงุณุช
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู bucket public ุงุณุช
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู RLS policies ุจู ุฏุฑุณุช ุชูุธู ุดุฏูโุงูุฏ
4. ุฏุฑ Console ูุฑูุฑฺฏุฑ (F12) ุฎุทุงูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ูุดฺฉู: ูุงู ุฏุงูููุฏ ููโุดูุฏ

**ุฑุงูโุญู:**
1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู bucket public ุงุณุช
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู policy ุจุฑุง ุฏุณุชุฑุณ ุนููู ูุฌูุฏ ุฏุงุฑุฏ
3. URL ูุงู ุฑุง ุฏุฑ ูุฑูุฑฺฏุฑ ุจุงุฒ ฺฉูุฏ ุชุง ุจุจูุฏ ุขุง ูุงุจู ุฏุณุชุฑุณ ุงุณุช

### ูุดฺฉู: ุฎุทุง "Storage bucket not found"

**ุฑุงูโุญู:**
1. ูุทูุฆู ุดูุฏ ฺฉู bucket `blog-pdfs` ุฏุฑ Supabase ุงุฌุงุฏ ุดุฏู ุงุณุช
2. ูุงู bucket ุฑุง ุฏูุจุงุฑู ุจุฑุฑุณ ฺฉูุฏ (ุญุณุงุณ ุจู ุญุฑูู ฺฉูฺฺฉ/ุจุฒุฑฺฏ)

## ๐ ุณุงุฎุชุงุฑ ุฏุงุฏู

ูุงูโูุง PDF ุจู ุตูุฑุช JSON ุฏุฑ ุฏุชุงุจุณ ุฐุฎุฑู ูโุดููุฏ:

```json
[
  {
    "name": "ุฌุฒูู-ฺฏุฑุงูุฑ-ุงูฺฏูุณ.pdf",
    "url": "https://your-project.supabase.co/storage/v1/object/public/blog-pdfs/...",
    "size": 5242880
  }
]
```

## โ ฺฺฉโูุณุช ููุง

- [ ] ููุฏ `pdf_files` ุจู ุฌุฏูู `blog_posts` ุงุถุงูู ุดุฏ
- [ ] Bucket `blog-pdfs` ุฏุฑ Supabase ุงุฌุงุฏ ุดุฏ
- [ ] Bucket ุจู ุตูุฑุช public ุชูุธู ุดุฏ
- [ ] RLS policies ุจุฑุง ุฏุณุชุฑุณ ุนููู ู ุขูพููุฏ ุชูุธู ุดุฏูุฏ
- [ ] ุชุณุช ุขูพููุฏ ูุงู ูููู ุจูุฏ
- [ ] ุชุณุช ุฏุงูููุฏ ูุงู ูููู ุจูุฏ
- [ ] ูุงูโูุง ุฏุฑ ุตูุญู ููุงูู ููุงุด ุฏุงุฏู ูโุดููุฏ

---

**ุชุงุฑุฎ ุงุฌุงุฏ**: ุงฺฉุชุจุฑ 2025  
**ูุถุนุช**: โ ุขูุงุฏู ุงุณุชูุงุฏู

