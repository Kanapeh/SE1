# ุฑุงูููุง ุญู ูุดฺฉู ุนุฏู ููุงุด ูุนููโูุง - ูุดฺฉู ุณุงุฎุชุงุฑ ุฌุฏูู

## ๐ ูุดฺฉู ุงุตู
ุดูุง 3 ูุนูู ุฏุฑ ุฌุฏูู `teachers` ุฏุงุฑุฏ ุงูุง ููุท 1 ูุนูู ุฏุฑ ุฏุงุดุจูุฑุฏ ุงุฏูู ููุงุด ุฏุงุฏู ูโุดูุฏ.

## ๐ง ุนูุช ูุดฺฉู
**ุชูุงูุช ุฏุฑ ุณุงุฎุชุงุฑ ุฌุฏูู:**
- **ุฏุฑ ุฏุชุงุจุณ ุดูุง:** `id` ุจู ุนููุงู `gen_random_uuid()` ุชุนุฑู ุดุฏู
- **ุฏุฑ ฺฉุฏ ุงูพูฺฉุดู:** `id` ุจู ุนููุงู `user_id` (ุงุฑุฌุงุน ุจู `auth.users`) ุชุนุฑู ุดุฏู
- **RLS Policies:** ุจุฑ ุงุณุงุณ `auth.uid() = id` ููุดุชู ุดุฏูโุงูุฏ

## โ ุฑุงูโุญู

### ูุฑุญูู 1: ุงุฌุฑุง ุงุณฺฉุฑูพุช ุงุตูุงุญ ุณุงุฎุชุงุฑ

```sql
-- ุฏุฑ Supabase SQL Editor ุงุฌุฑุง ฺฉูุฏ:
-- ูุงู: database/fix_teachers_table_structure.sql
```

ุงู ุงุณฺฉุฑูพุช:
- ุณุชูู `user_id` ุฑุง ุงุถุงูู ูโฺฉูุฏ
- RLS policies ุฑุง ุงุตูุงุญ ูโฺฉูุฏ
- ุฏุณุชุฑุณ ุงุฏูู ุฑุง ุชูุธู ูโฺฉูุฏ
- ุชุณุช ุฏุณุชุฑุณ ุงูุฌุงู ูโุฏูุฏ

### ูุฑุญูู 2: ุชุณุช ุฏุฑ ุฏุงุดุจูุฑุฏ

1. ุจู `/admin/teachers` ุจุฑูุฏ
2. ุตูุญู ุฑุง refresh ฺฉูุฏ
3. ุจุงุฏ ุชูุงู 3 ูุนูู ููุงุด ุฏุงุฏู ุดููุฏ

## ๐ ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### 1. ุงุตูุงุญ ุณุงุฎุชุงุฑ ุฌุฏูู:
- ุงุถุงูู ฺฉุฑุฏู ุณุชูู `user_id`
- ุงุฌุงุฏ ุงูุฏฺฉุณ ุจุฑุง `user_id`
- ุงุตูุงุญ RLS policies

### 2. ุงุตูุงุญ ฺฉุฏ ุงูพูฺฉุดู:
- **`app/api/teacher-profile/route.ts`** - ุฌุณุชุฌู ุจุฑ ุงุณุงุณ `user_id` ุง `id`
- **`app/api/student-profile/route.ts`** - ุฌุณุชุฌู ุจุฑ ุงุณุงุณ `user_id` ุง `id`

### 3. RLS Policies ุฌุฏุฏ:
- **ุนููู:** ูโุชูุงูุฏ ูุนููุงู ูุนุงู ุฑุง ุจุจูุฏ
- **ูุนููุงู:** ูโุชูุงููุฏ ูพุฑููุงู ุฎูุฏ ุฑุง ูุฑุงุด ฺฉููุฏ (ุจุฑ ุงุณุงุณ `user_id`)
- **ุงุฏููโูุง:** ูโุชูุงููุฏ ููู ฺฉุงุฑ ุฑุง ุจุง ูุนููุงู ุงูุฌุงู ุฏููุฏ

## ๐ ุชุณุช ุฏุณุชุฑุณ

### ุจุฑุฑุณ ุชุนุฏุงุฏ ูุนููุงู:
```sql
SELECT COUNT(*) as total_teachers FROM public.teachers;
```

### ุจุฑุฑุณ ูุนููุงู ุฏุฑ ุงูุชุธุงุฑ:
```sql
SELECT COUNT(*) as pending_teachers 
FROM public.teachers 
WHERE status = 'pending';
```

### ุจุฑุฑุณ ุฏุณุชุฑุณ ุงุฏูู:
```sql
SELECT COUNT(*) as admin_count 
FROM public.admins 
WHERE is_active = true;
```

## โ ูุชุฌู ููุง

ุจุนุฏ ุงุฒ ุงุฌุฑุง ุงุณฺฉุฑูพุช:
- ุชูุงู 3 ูุนูู ุฏุฑ ุฏุงุดุจูุฑุฏ ุงุฏูู ููุงุด ุฏุงุฏู ูโุดููุฏ
- ุงุฏูู ูโุชูุงูุฏ ูุถุนุช ูุนููุงู ุฑุง ุชุบุฑ ุฏูุฏ
- ุขูุงุฑ ูุนููุงู ุฏุฑุณุช ููุงุด ุฏุงุฏู ูโุดูุฏ
- RLS policies ุฏุฑุณุช ฺฉุงุฑ ูโฺฉููุฏ

## ๐จ ุงฺฏุฑ ูุดฺฉู ุญู ูุดุฏ

1. **ุจุฑุฑุณ ูุงฺฏโูุง ฺฉูุณูู:**
   - F12 ุฑุง ูุดุงุฑ ุฏูุฏ
   - ุจู ุชุจ Console ุจุฑูุฏ
   - ุฎุทุงูุง ูุฑุจูุท ุจู Supabase ุฑุง ุจุฑุฑุณ ฺฉูุฏ

2. **ุจุฑุฑุณ Supabase Logs:**
   - ุจู Supabase Dashboard ุจุฑูุฏ
   - ุจู ุจุฎุด Logs ุจุฑูุฏ
   - ุฎุทุงูุง ูุฑุจูุท ุจู ุฏุชุงุจุณ ุฑุง ุจุฑุฑุณ ฺฉูุฏ

3. **ุชุณุช ุฏุณุชุฑุณ:**
   - ุงุณฺฉุฑูพุช `fix_teachers_table_structure.sql` ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏ
   - ูุชุงุฌ ุชุณุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ุญู ูุดุฏ:
1. ูุชุงุฌ ุงุณฺฉุฑูพุช `fix_teachers_table_structure.sql` ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ูุงฺฏโูุง ฺฉูุณูู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ูพุงูโูุง ุฎุทุง ุฑุง ฺฉูพ ฺฉูุฏ
4. ุจุง ุชู ูพุดุชุจุงู ุชูุงุณ ุจฺฏุฑุฏ
